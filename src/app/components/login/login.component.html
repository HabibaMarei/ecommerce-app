<section class="bg-main-light shadow p-5 my-3">
    <h1 class="h2 text-main">Login Now:</h1>
    <form [formGroup]="loginForm" (ngSubmit)="loginSubmit()">
        <div class="mb-3">
            <label for="email" class="form-label">Email address:</label>
            <input type="email" class="form-control" id="email" placeholder="Enter a valid email"
                formControlName="email" 
                [ngClass]="{
                    'isValid': loginForm.get('email')?.valid && (loginForm.get('email')?.touched || loginForm.get('email')?.dirty),
                    'is-invalid': loginForm.get('email')?.invalid && (loginForm.get('email')?.touched || loginForm.get('email')?.dirty)
                }"/>
                @if(loginForm.get('email')?.errors && (loginForm.get('email')?.touched || loginForm.get('email')?.dirty)){
                    <div class="alert alert-danger my-2">
                        @if(loginForm.get('email')?.getError('required'))
                        {    
                            <p class="p-0 m-0">Email field can't be empty</p>
                        } 
                        @else if(loginForm.get('email')?.getError('email')){
                            <p class="p-0 m-0">Enter a valid email</p>
                        }                       
                    </div>
                }
        </div>
        <div class="mb-3">
            <label for="password" class="form-label">Password:</label>
            <input type="password" class="form-control" id="password" placeholder="Enter a valid password"
                formControlName="password"
                [ngClass]="{
                    'isValid': loginForm.get('password')?.valid && (loginForm.get('password')?.touched || loginForm.get('password')?.dirty),
                    'is-invalid': loginForm.get('password')?.invalid && (loginForm.get('password')?.touched || loginForm.get('password')?.dirty)
                }"
                />
                @if(loginForm.get('password')?.errors && (loginForm.get('password')?.touched || loginForm.get('password')?.dirty)){
                    <div class="alert alert-danger my-2">
                        @if(loginForm.get('password')?.getError('required'))
                        {    
                            <p class="p-0 m-0">Password field can't be empty</p>
                        } 
                        @else if(loginForm.get('password')?.getError('pattern')){
                            <p class="p-0 m-0">Enter a valid password</p>
                        }                       
                    </div>
                }
        </div>
        <button class="btn btn-main">@if(isLoading){<i class="fas fa-spin fa-spinner"></i>} Login</button>
        
        @if(msgError){
            <p class="alert alert-danger my-2">{{msgError}}</p>
        }
        
    </form>
</section>